{% extends 'booking/base.html' %}
{% block title %} Booking Summary {% endblock %}

{% block content %}
{% load static %}

<main class="mx-auto flex flex-col justify-center space-y-8 py-6">

    <!-- Step Indicator (Same style as your existing design) -->
            <!-- stepbystep -->
        <div class="bg-[#F4EB08]  mx-auto h-[100px] w-[1100px] shadow-md/50 rounded-[20px] flex flex-col">
            <!-- arrow  -->
            <div class="flex justify-between items-center flex-1 mx-20">
                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <path d="m17.54,3.64l-2.9,2.9-9.88-1.16c-.15-.02-.3.03-.41.14l-.59.59c-.24.24-.17.66.14.8l7.01,3.36-3.25,3.25-3.27-.65c-.16-.03-.33.02-.45.14l-.7.7c-.25.25-.17.67.16.81l4.27,1.83,1.83,4.27c.14.33.56.41.81.16l.7-.7c.12-.12.17-.29.14-.45l-.65-3.27,3.31-3.31,3.31,7.06c.15.31.56.39.81.14l.66-.66c.11-.11.16-.26.14-.41l-1.16-9.88,2.75-2.75c.7-.7.88-1.84.29-2.65-.74-1.03-2.19-1.12-3.05-.26Z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                   <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="m19,2H5c-.55,0-1,.45-1,1v4h-2v2h2v2h-2v2h2v2h-2v2h2v4c0,.55.45,1,1,1h14c1.1,0,2-.9,2-2V4c0-1.1-.9-2-2-2Zm-6.5,5c1.43,0,2.5,1.07,2.5,2.5s-1.07,2.5-2.5,2.5-2.5-1.07-2.5-2.5,1.07-2.5,2.5-2.5Zm4.5,10h-9v-1c0-1.66,1.34-3,3-3h3c1.66,0,3,1.34,3,3v1Z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"   class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="m4,5v4h2v-4h4v-2h-4c-1.1,0-2,.9-2,2Z"></path><path d="m6,15h-2v4c0,1.1.9,2,2,2h4v-2h-4v-4Z"></path><path d="m20,19h-4v2h4c1.1,0,2-.9,2-2v-4h-2v4Z"></path><path d="m16,3v2h4v4h2v-4c0-1.1-.9-2-2-2h-4Z"></path><path d="M8 15H18V17H8z"></path><path d="M18 7 8 7 8 11 3 11 3 13 8 13 18 13 23 13 23 11 18 11 18 7z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="m21,7h-1v-3c0-.55-.45-1-1-1H5c-1.65,0-3,1.35-3,3v12c0,2.2,1.79,3,3,3h16c.55,0,1-.45,1-1v-12c0-.55-.45-1-1-1Zm-3,9h-2v-4h2v4ZM5,5h13v2H5c-.55,0-1-.45-1-1s.45-1,1-1Z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"   class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m-1.29 13.71c-.2.2-.45.29-.71.29s-.51-.1-.71-.29l-3-3L7.7 11.3l2.29 2.29 5.29-5.29 1.41 1.41-6 6Z"></path>
                    </svg>
                </div>

            </div>

            <!-- label  -->
             <div></div>

        </div>

        <div class="flex w-[1100px] mx-auto flex-1  gap-5">
            <div class="flex flex-1 flex-col space-y-5">
                <div class="flex-1  border border-gray-300 rounded-md bg-white px-10 py-7 space-y-3">
                    <div class="flex flex-1">
                        <svg  xmlns="http://www.w3.org/2000/svg" width="28" height="28"  
                            fill="#NaNNaNNaN" viewBox="0 0 24 24" >
                            <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                            <path d="m19,2H5c-.55,0-1,.45-1,1v4h-2v2h2v2h-2v2h2v2h-2v2h2v4c0,.55.45,1,1,1h14c1.1,0,2-.9,2-2V4c0-1.1-.9-2-2-2Zm0,18H6V4h13v16Z"></path><path d="M12.5 7A2.5 2.5 0 1 0 12.5 12 2.5 2.5 0 1 0 12.5 7z"></path><path d="m17,16c0-1.66-1.34-3-3-3h-3c-1.66,0-3,1.34-3,3v1h9v-1Z"></path>
                        </svg>
                        <div>
                            <h1 class="text-xl  font-semibold flex leading-none">
                                Booking Summary</h1>
                            <p class="text-[11px] text-gray-500">Review your booking before proceeding to payment</p>
                        </div>
                    </div>

                    <div class="flex justify-between">
                        <h1 class="font-semibold font-sm">Flight Information</h1>
                        <div class="flex  items-end gap-1">
                            <span class="text-[11px]">Trip Type: </span>
                            <p class="text-sm font-medium">{% if return_schedule %} Round-Trip {% elif depart_schedule %} One-way {% endif %}</p>
                        </div>
                    </div>

                    <div class="flex-1 border  border-gray-400 rounded-sm  p-3 px-5">
                        {% if depart_schedule %}
                        <div class="flex-1 flex justify-between mb-3">
                            <p class="font-semibold">Departure</p>
                            <div class="flex  items-end gap-1">
                                <span class="text-[11px]">Flight: </span>
                                <p class="text-sm font-medium">{{ depart_schedule.flight }}</p>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1 ">
                            <p class="text-[11px]">From: <span class="text-sm font-medium"> {{ depart_schedule.flight.route.origin_airport }}</span></p>
                            <p class="text-[11px]">To: <span class="text-sm font-medium">{{ depart_schedule.flight.route.destination_airport }}</span></p>
                            <p class="text-[11px]">depart on: <span class="text-sm font-medium">{{ depart_schedule.departure_time|date:"d M Y, h:i A" }}</span></p>
                        </div>

                        <div class=" w-full flex justify-end items-end gap-1">
                            <span class="text-[11px]">base price: </span>
                            <p class="text-sm font-semibold">PHP {{ depart_schedule.price|floatformat:2 }}</p>
                        </div>
                        {% endif %}
                    </div>
                    <div class="flex-1 border  border-gray-400 rounded-sm  p-3 px-5">
                        {% if return_schedule %}
                        <div class="flex-1 flex justify-between mb-3">
                            <p class="font-semibold">Return</p>
                            <div class="flex  items-end gap-1">
                                <span class="text-[11px]">Flight: </span>
                                <p class="text-sm font-medium">{{ return_schedule.flight }}</p>
                            </div>
                        </div>

                        <div class="flex flex-col gap-1 ">
                            <p class="text-[11px]">From: <span class="text-sm font-medium">{{ return_schedule.flight.route.origin_airport }}</span></p>
                            <p class="text-[11px]">To: <span class="text-sm font-medium">{{ return_schedule.flight.route.destination_airport }}</span></p>
                            <p class="text-[11px]">depart on: <span class="text-sm font-medium"> {{ return_schedule.departure_time|date:"d M Y, h:i A" }}</span></p>
                        </div>

                        <div class=" w-full flex justify-end items-end gap-1">
                            <span class="text-[11px]">base price: </span>
                            <p class="text-sm font-semibold">PHP {{ return_schedule.price|floatformat:2 }}</p>
                        </div>
                        {% endif %}
                    </div>

                    
                </div>
                <div class="flex-1  border border-gray-300 rounded-md bg-white px-10 py-7 space-y-3"></div>


               <div class="flex-1 border border-gray-300 rounded-md bg-white px-10 py-7 space-y-3">
                    <h1 class="text-lg font-semibold mb-4">Passenger List</h1>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="border-b border-gray-300">
                                    <th class="text-left py-3 px-4 font-medium text-[11px]">No.</th>
                                    <th class="text-left py-3 px-4 font-medium text-[11px]">Passenger Name</th>
                                    <th class="text-left py-3 px-4 font-medium text-[11px]">Type</th>
                                    <th class="text-left py-3 px-4 font-medium text-[11px]">Seat Number</th>
                                    <th class="text-left py-3 px-4 font-medium text-[11px]">Declaration /Request</th>
                                    <th class="text-left py-3 px-4 font-medium text-[11px]">Person with Disability </th>
                                </tr>
                            </thead>
                            <tbody class="text-sm">
                                {% for p in passengers %}
                                <tr class="border-b border-gray-200">
                                    <td class="py-3 px-4">{{ forloop.counter }}</td>
                                    <td class="py-3 px-4">{{ p.full_name }}</td>
                                    <td class="py-3 px-4">{{ p.passenger_type }}</td>
                                    <td class="py-3 px-4">{{ p.depart_seat }}/{{ p.return_seat }}</td>
                                    <td class="py-3 px-4">✓</td>
                                    <td class="py-3 px-4">✓</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="flex-1 max-w-[400px] h-[454px] space-y-5 ">
                <div class="flex-1 rounded-md border p-7 px-10 bg-white border-gray-300 space-y-5">
                    <h1 class="font-semibold text-lg mb-7">Price Summary</h1>
                    
                    <div class="flex justify-between items-end">
                        <p class="text-[11px] text-gray-400">Number of passengers:</p>
                        <p class="font-medium">{{ num_passengers }}</p>
                    </div>
                    <div class="w-full border border-gray-100"></div>
                    <div class="flex justify-between items-end">
                        <p class="text-[11px] text-gray-400">Subtotal:</p>
                        <p class="font-medium"><span class="text-[11px] font-light">PHP</span>{{ subtotal|floatformat:2 }}</p>
                    </div>
                    <div class="w-full border border-gray-100"></div>
                    <div class="flex justify-between items-end">
                        <button class="px-3 py-1 text-[11px] text-white bg-[#2975F7] hover:bg-[#2975F7]/80 cursor-pointer"> Taxes/Fees</button>
                        <p class="font-medium"><span class="text-[11px] font-light">PHP</span> {{ taxes|floatformat:2 }}</p>
                    </div>
                    <div class="w-full border border-gray-100"></div>
                    <div class="flex justify-between items-end">
                        <button class="px-3 py-1 text-[11px] text-white bg-[#2975F7] hover:bg-[#2975F7]/80 cursor-pointer"> Insurance</button>
                        <p class="font-medium"><span class="text-[11px] font-light">PHP</span> {{ insurance|floatformat:2 }}</p>
                    </div>
                    <div class="w-full border border-gray-200"></div>

                    <div class="flex justify-between items-end">
                        <p class="text-[11px] text-gray-400">total:</p>
                        <p class="font-semibold text-xl"><span class="text-[11px] font-light">PHP</span>  {{ total|floatformat:2 }}</p>
                    </div>        
                </div>

                <div class="flex justify-between gap-3">
                    <a href="{% url 'bookingapp:select_seat' %}" class="flex-1  text-center  cursor-pointer text-gray-400 hover:shadow-sm/30 hover:text-gray-700 px-5 py-3 rounded-sm shadow-sm/10 font-semibold text-sm" >Back</a>
                    <form action="{% url 'bookingapp:confirm_booking' %}" method="POST" >
                        {% csrf_token %}
                        <button class="flex-1 bg-[#2975F7] hover:bg-[#2975F7]/90 cursor-pointer text-white px-5 py-3 rounded-sm  font-medium text-sm">
                            Proceed to Payment 
                        </button>
                    </form>
                </div>
            </div>
        </div>


    

   

    </div>

</main>
{% endblock %}
