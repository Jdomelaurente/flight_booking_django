{% extends 'booking/base.html' %}
{% block title %} Select a Flight Schedule
{% endblock %}

{% block content %}
{% load static %}

    <main class=" mx-auto  flex justify-center relative mt-7 space-y-5 flex-col ">
        <!-- edit search  -->
        <div class="flex-1 mx-auto max-w-[1200px] px-8 bg-[#ECEAEA] flex  shadow-md/50  py-4 h-[82px]  w-5xl rounded-full justify-between items-center">

            <!-- from -->
            <div class="flex items-center justify-center flex-1 gap-3  ">
                <div class=" flex-1 flex flex-col justify-center  ">
                    <p class="poppins-bold first-of-type: text-base leading-none ">MNL</p>
                    <p class="text-[#828282] text-xs">Manila</p>
                </div>
                <div class="border-2 h-0 w-10"></div>
                <div class="  flex flex-col justify-center ">
                    <p class="poppins-bold   text-base leading-none ">BXU</p>
                    <p class="text-[#828282] text-xs">Butuan City</p>
                </div>
            </div>

            <!-- depart -->
            <div class="flex items-center leading-none  justify-center   flex-1">
                <div class="  flex flex-col justify-center ">
                    <p class="poppins-bold text-base leading-none">15 May 2025</p>
                    <p class="text-[#828282] text-xs">Depart</p>
                </div>

            </div>
            <!-- return -->
            <div class="flex items-center leading-none  justify-center   flex-1">
                <div class="  flex flex-col justify-center ">
                    <p class="poppins-bold text-base leading-none ">30 May 2025</p>
                    <p class="text-[#828282] text-xs">Return</p>
                </div>
            </div>    
               

            <!-- passenger -->
           <div class="flex items-center leading-none  justify-center   flex-1">
                <div class="  flex flex-col justify-center ">
                    <p class="poppins-bold text-base leading-none">1 Adult</p>
                    <p class="text-[#828282] text-xs">Passenger</p>
                </div>
            </div>
            <div class="flex items-center leading-none  flex-1">
                <button class="bg-[#2975F7] hover:bg-[#2975F7]/80 text-sm cursor-pointer py-2 px-10 rounded-full text-white">Edit search</button>
            </div>
        </div>


        <!-- stepbystep -->
       <div class="bg-[#F4EB08]  mx-auto h-[100px] w-[1100px] shadow-md/50 rounded-[20px] flex flex-col">
            <!-- arrow  -->
            <div class="flex justify-between items-center flex-1 mx-20">
                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <path d="m17.54,3.64l-2.9,2.9-9.88-1.16c-.15-.02-.3.03-.41.14l-.59.59c-.24.24-.17.66.14.8l7.01,3.36-3.25,3.25-3.27-.65c-.16-.03-.33.02-.45.14l-.7.7c-.25.25-.17.67.16.81l4.27,1.83,1.83,4.27c.14.33.56.41.81.16l.7-.7c.12-.12.17-.29.14-.45l-.65-3.27,3.31-3.31,3.31,7.06c.15.31.56.39.81.14l.66-.66c.11-.11.16-.26.14-.41l-1.16-9.88,2.75-2.75c.7-.7.88-1.84.29-2.65-.74-1.03-2.19-1.12-3.05-.26Z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                   <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="m19,2H5c-.55,0-1,.45-1,1v4h-2v2h2v2h-2v2h2v2h-2v2h2v4c0,.55.45,1,1,1h14c1.1,0,2-.9,2-2V4c0-1.1-.9-2-2-2Zm-6.5,5c1.43,0,2.5,1.07,2.5,2.5s-1.07,2.5-2.5,2.5-2.5-1.07-2.5-2.5,1.07-2.5,2.5-2.5Zm4.5,10h-9v-1c0-1.66,1.34-3,3-3h3c1.66,0,3,1.34,3,3v1Z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"   class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="m4,5v4h2v-4h4v-2h-4c-1.1,0-2,.9-2,2Z"></path><path d="m6,15h-2v4c0,1.1.9,2,2,2h4v-2h-4v-4Z"></path><path d="m20,19h-4v2h4c1.1,0,2-.9,2-2v-4h-2v4Z"></path><path d="m16,3v2h4v4h2v-4c0-1.1-.9-2-2-2h-4Z"></path><path d="M8 15H18V17H8z"></path><path d="M18 7 8 7 8 11 3 11 3 13 8 13 18 13 23 13 23 11 18 11 18 7z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"  class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="m21,7h-1v-3c0-.55-.45-1-1-1H5c-1.65,0-3,1.35-3,3v12c0,2.2,1.79,3,3,3h16c.55,0,1-.45,1-1v-12c0-.55-.45-1-1-1Zm-3,9h-2v-4h2v4ZM5,5h13v2H5c-.55,0-1-.45-1-1s.45-1,1-1Z"></path>
                    </svg>
                </div>

                <div class="flex-1 border text-white"></div>

                <div class="   rounded-full p-1 border border-[#2975F7]">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="22" height="22"   class="bg-[#2975F7] p-1 rounded-full"
                        fill="white" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m-1.29 13.71c-.2.2-.45.29-.71.29s-.51-.1-.71-.29l-3-3L7.7 11.3l2.29 2.29 5.29-5.29 1.41 1.41-6 6Z"></path>
                    </svg>
                </div>

            </div>

            <!-- label  -->
             <div></div>

        </div>

        <div class="flex w-full flex-1 flex-col mx-auto max-w-[1200px] mt-5 ">
            <div class="flex mx-20 ">
                <h1 class="text-xl  font-bold flex justify-center gap-2 items-center">
                    <svg  xmlns="http://www.w3.org/2000/svg" width="28" height="28"  
                        fill="#NaNNaNNaN" viewBox="0 0 24 24" >
                        <!--Boxicons v3.0 https://boxicons.com | License  https://docs.boxicons.com/free-->
                        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2M9 8c1.15 0 2 .85 2 2s-.85 2-2 2-2-.85-2-2 .85-2 2-2m-3 8c0-1.66 1.34-3 3-3s3 1.34 3 3zm12-1h-4v-2h4zm0-4h-5V9h5z"></path>
                    </svg>
                    Passenger Information</h1>
            </div>

        <form  action="{% url 'bookingapp:save_passengers' %}"  method="post">
        {% csrf_token  %}
            <div class="flex w-full justify-center items-center mt-5">
                <div class="flex bg-white shadow-md/50 w-[1000px] ">

                    <!-- passenger sidebar -->
                    <div class="w-[200px] bg-gray-200">
                        {% for passenger in passenger_range %}
                            <div class="py-5 flex justify-center passenger-tab cursor-pointer {% if forloop.first %}bg-white border-l-8 border-[#2975F7] z-10{% endif %}" 
                                data-passenger="{{ passenger }}">
                                <p class="text-xs">Passenger {{ passenger }}</p>
                            </div>
                        {% endfor %}
                    </div>

                    <!-- passenger forms -->
                    <div class="w-full mx-20 py-15">
                        {% for passenger in passenger_range %}
                        <div class="passenger-form {% if not forloop.first %}hidden{% endif %}" id="passenger-form-{{ passenger }}">
                            <h1 class="text-lg font-bold">Passenger {{ passenger }} </h1>
                            <p class="text-xs text-gray-500">
                                Please make sure that you enter your name exactly as it is shown on your Valid ID
                            </p>

                            <!-- Name fields -->
                            <div class="flex mt-5 justify-between space-x-5">
                                <div class="flex-1 flex flex-col max-w-[100px]">
                                    <label class="text-sm flex">Gender <p class="text-red-500">*</p></label>
                                    
                                    <select id="" name="gender_{{ passenger }}" placeholder="Mr/Mrs" class="border py-2 px-1">
                                        <option value="" hidden> </option>
                                        <option value="male">male</option>
                                        <option value="female">female</option>
                                    </select>
                                </div>
                                <div class="flex-1 flex flex-col">
                                    <label class="text-sm flex">First name <p class="text-red-500">*</p></label>
                                    <input type="text" name="first_name_{{ passenger }}" placeholder="Juan" class="border py-2 px-1">
                                </div>
                                <div class="flex-1 flex flex-col">
                                    <label class="text-sm flex">Last name <p class="text-red-500">*</p></label>
                                    <input type="text" name="last_name_{{ passenger }}" placeholder="Dela Cruz" class="border py-2 px-1">
                                </div>
                                <div class="flex-1 flex flex-col max-w-[100px]">
                                    <label class="text-sm flex">M.I.</label>
                                    <input type="text" name="mi_{{ passenger }}" placeholder="L" class="border py-2 px-1">
                                </div>
                            </div>

                            <!-- DOB -->
                            <div class="flex mt-5 flex-col">
                                <h1 class="text-lg font-medium">Date of Birth</h1>
                                <div class="flex-1 flex space-x-10 w-full">
                                    <div class="flex-1 flex space-x-5">
                                        <div class="flex flex-col w-[120px]">
                                            <label class="text-sm flex">Day <p class="text-red-500">*</p></label>
                                            <!-- <input type="text"  placeholder="30" class="border py-2 px-1"> -->
                                            <select name="dob_day_{{ passenger }}" id=""  class="border py-2 px-1">
                                                <option hidden></option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                                <option value="9">9</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                                <option value="13">13</option>
                                                <option value="14">14</option>
                                                <option value="15">15</option>
                                                <option value="16">16</option>
                                                <option value="17">17</option>
                                                <option value="18">18</option>
                                                <option value="19">19</option>
                                                <option value="20">20</option>
                                                <option value="21">21</option>
                                                <option value="22">22</option>
                                                <option value="23">23</option>
                                                <option value="24">24</option>
                                                <option value="25">25</option>
                                                <option value="26">26</option>
                                                <option value="27">27</option>
                                                <option value="28">28</option>
                                                <option value="29">29</option>
                                                <option value="30">30</option>
                                                <option value="31">31</option>
                                            </select>
                                            
                                        </div>
                                        <div class="flex flex-col w-[120px]">
                                            <label class="text-sm flex">Month <p class="text-red-500">*</p></label>
                                            <select name="dob_month_{{ passenger }}" class="border py-2 px-1">
                                                <option hidden></option>
                                                <option value="1">Jan</option>
                                                <option value="2">Feb</option>
                                                <option value="3">Mar</option>
                                                <option value="4">Apr</option>
                                                <option value="5">May</option>
                                                <option value="6">Jun</option>
                                                <option value="7">Jul</option>
                                                <option value="8">Aug</option>
                                                <option value="9">Sep</option>
                                                <option value="10">Oct</option>
                                                <option value="11">Nov</option>
                                                <option value="12">Dec</option>
                                            </select>
                                        </div>
                                        <div class="flex flex-col w-[120px]">
                                            <label class="text-sm flex">Year <p class="text-red-500">*</p></label>
                                            <select id="dob-year-{{ passenger }}" name="dob_year_{{ passenger }}" class="border py-2 px-1">
                                                <option hidden></option>
                                            </select>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Passport + Nationality -->
                            <div class="flex-1 flex mt-5 space-x-5">
                                <div class="flex flex-col flex-1">
                                    <label class="text-sm flex">Passport <p class="text-red-500">*</p></label>
                                    <input type="text" name="passport_{{ passenger }}" placeholder="DASD4D44ASD" class="border py-2 px-1">
                                </div>
                                <div class="flex flex-col flex-1">
                                    <label class="text-sm flex">Nationality <p class="text-red-500">*</p></label>
                                    <input type="text" name="nationality_{{ passenger }}" placeholder="Philippines" class="border py-2 px-1">
                                </div>
                            </div>

                            <!-- Checkboxes -->
                            <div class="flex-1 flex flex-col mt-5 space-x-5">
                                <div class="flex gap-2 flex-1">
                                    <input type="checkbox" name="declaration_{{ passenger }}">
                                    <label class="text-xs">I have a declaration / request</label>
                                </div>
                                <div class="flex gap-2 flex-1">
                                    <input type="checkbox" name="pwd_{{ passenger }}">
                                    <label class="text-xs">I am a Person with Disability</label>
                                </div>
                            </div>

                            <!-- Next passenger button -->
                            <div class="flex-1 flex flex-col mt-5 items-end space-x-5">
                                {% if not forloop.last %}
                                <button type="button" class="next-passenger shadow-sm/20 hover:bg-gray-100 flex items-center py-1 px-5 text-[#2975F7] hover:text-[#2975F7]/80 rounded-full cursor-pointer justify-center gap-2" data-current="{{ passenger }}">
                                    Next passenger
                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#2975F7" viewBox="0 0 22 22">
                                        <path d="M6 13h8.09l-3.3 3.29 1.42 1.42 5.7-5.71-5.7-5.71-1.42 1.42 3.3 3.29H6z"></path>
                                    </svg>
                                </button>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        


            <!-- contact -->
            <div class="flex  w-full justify-center items-center mt-10 " >
                <div class="flex bg-white flex-col shadow-md/50 w-[1000px] px-10 py-10 ">
                    <h1 class="font-bold text-lg">Contact information</h1>
                    <p class="text-xs text-gray-500">Let us know how we may reach you if there are changes or questions related to your booking and payment. We will also be sending your itinerary to below email.</p>

                    <div class="flex mt-5 justify-between space-x-5 mx-15">
                        <div class="flex-1 flex flex-col ">
                            <label for="" class="text-sm flex">First name <p class="text-red-500">*</p></label>
                            <input type="text" placeholder="JUan" name="f_name_contact" value="{{ student.first_name }}" {% if student %}readonly{% endif %} class="border py-2 px-1">
                        </div>
                        <div class="flex-1 flex flex-col ">
                            <label for="" class="text-sm flex">Last name <p class="text-red-500">*</p></label>
                            <input type="text" placeholder="Delata" name="l_name_contact" value="{{ student.last_name }}" {% if student %}readonly{% endif %} class="border py-2 px-1">
                        </div>
                        <div class="flex-1 flex flex-col max-w-[100px]">
                            <label for="" class="text-sm flex">M.I. </label>
                            <input type="text" placeholder="L" name="m_name_contact" class="border py-2 px-1">
                        </div>
                        
                    </div>

                    <div class="flex mt-5  space-x-5 mx-15">
                        <!-- <div class="flex-1 flex flex-col max-w-[100px]">
                            <label for="" class="text-sm flex">Country Code <p class="text-red-500">*</p></label>
                            <input type="text" placeholder="ex. Mr/Mrs" class="border py-2 px-3" value="(+63)">
                        </div> -->
                        <div class="flex-1 flex flex-col">
                            <label for="" class="text-sm flex">Mobile Number <p class="text-red-500">*</p></label>
                            <input type="text" placeholder="099xxxxxx" name="number_contact" value="{{ student.phone }}" {% if student %}readonly{% endif %} class="border py-2 px-1">
                        </div>
                         <div class="flex-1 flex flex-col">
                            <label for="" class="text-sm flex">Email <p class="text-red-500">*</p></label>
                            <input type="text" placeholder="johnjoe@example.com" name="email_contact" value="{{ student.email }}" {% if student %}readonly{% endif %} class="border py-2 px-3" >
                        </div>
                        

                    </div>

                    <!-- <div class="flex mt-5  space-x-5 mx-15">
                        <div class="flex-1 flex flex-col">
                            <label for="" class="text-sm flex">Email <p class="text-red-500">*</p></label>
                            <input type="text" placeholder="johnjoe@example.com" name="email_contact" value="{{ student.email }}" {% if student %}readonly{% endif %} class="border py-2 px-3" >
                        </div>
                        
                        <div class="flex-1 flex flex-col max-w-[300px]">
                            <label for="" class="text-sm flex">Confirm Email <p class="text-red-500">*</p></label>
                            <input type="text" placeholder=""  name="confirm_email_contact" class="border py-2 px-1">
                        </div> 

                    </div> -->

                </div>
            </div>

       

            <div class="flex  w-full justify-center items-center mt-7 " >
                <div class="flex bg-white flex-col shadow-md/50 w-[1000px] px-10 py-5 ">
                    <div class="flex gap-4">
                        <input type="checkbox" required>
                        <label for="" class="text-xs text-gray-600">I confirm that I have read, understood, and agree to the updated Cebu <strong class="text-[#2975F7] hover:text-[#2975F7]/80 cursor-pointer">Privacy Policy</strong> Pacific . I consent to the collection, use, processing and sharing of my personal information in accordance therewith.</label>
                    </div>
                    
                    
                </div>
            </div>    
            
            <div class="flex  w-full justify-center items-center mt-2  " >
                <div class="flex flex-col w-[911px] py-5 items-end">
                    <div class="flex gap-4 ">
                        <button type="submit"
                         class="px-20 rounded-full py-2 bg-[#2975F7] hover:bg-[#2975F7]/80 cursor-pointer shadow-lg/50 text-white">Confirm</button>
                    </div>
                </div>
            </div> 
        </div>    
        </form>



    </main>
<!-- JS to switch passengers -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    function showPassenger(passenger) {
        // Hide all forms
        document.querySelectorAll(".passenger-form").forEach(form => form.classList.add("hidden"));
        // Show selected form
        let form = document.getElementById(`passenger-form-${passenger}`);
        if (form) form.classList.remove("hidden");

        // Update sidebar highlight
        document.querySelectorAll(".passenger-tab").forEach(tab => {
            tab.classList.remove("bg-white", "border-l-8", "border-[#2975F7]", "z-10");
        });
        let tab = document.querySelector(`.passenger-tab[data-passenger="${passenger}"]`);
        if (tab) tab.classList.add("bg-white", "border-l-8", "border-[#2975F7]", "z-10");
    }

    // Handle Next button
    document.querySelectorAll(".next-passenger").forEach(btn => {
        btn.addEventListener("click", () => {
            let current = parseInt(btn.dataset.current);
            showPassenger(current + 1);
        });
    });

    // Handle sidebar clicks
    document.querySelectorAll(".passenger-tab").forEach(tab => {
        tab.addEventListener("click", () => {
            let passenger = parseInt(tab.dataset.passenger);
            showPassenger(passenger);
        });
    });

    // find all year dropdowns (in case you have multiple passengers)
    document.querySelectorAll("select[name^='dob_year_']").forEach(select => {
        const currentYear = new Date().getFullYear();
        const startYear = 1900;

        for (let year = currentYear; year >= startYear; year--) {
            let option = document.createElement("option");
            option.value = year;
            option.textContent = year;
            select.appendChild(option);
        }
    });

});    
</script>
{% endblock %}