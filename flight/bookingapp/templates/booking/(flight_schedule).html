{% extends 'booking/base.html' %}
{% block title %} Flight Schedule
{% endblock  %}

{% block content %}
<div class="flex flex-col space-y-10">
 <div class="flex flex-col justify-center items bg-white w-auto max-h-[171px] p-5 rounded-lg shadow-md mt-40">
    <!-- Radio buttons row -->
    <div class="flex space-x-6 mb-4">
      <div>
        <input type="radio" id="oneway" name="trip" checked>
        <label for="oneway" class="font-semibold">One-Way</label>
      </div>
      <div>
        <input type="radio" id="round" name="trip">
        <label for="round" class="font-semibold">Round Trip</label>
      </div>
      <div>
        <input type="radio" id="multi" name="trip">
        <label for="multi" class="font-semibold">Multi-city</label>
      </div>
    </div>

    <!-- Input fields row -->
    <div class="flex justify-center items-stretch gap-4">
      
      <!-- From -->
      <div class="flex-1 border-2 p-2 w-[290px] flex flex-col justify-between">
        <p class="text-sm">From</p>
        <input type="text" value="Manila" class="px-2 py-1">
      </div>

      <!-- To -->
      <div class="border-2 p-2 w-[290px] flex flex-col justify-between">
        <p class="text-sm">To</p>
        <input type="text" value="Davao" class="px-2 py-1">
      </div>

      <!-- DATE -->
      <div class="flex border-2 p-2  flex-1 gap-6">
        <div class="flex flex-col flex-1">
          <p class="text-sm">Depart</p>
          <input type="date" id="depart" value="2025-09-03" class="px-2 py-1  rounded">
        </div>
        <div class="flex flex-col flex-1">
          <p class="text-sm">Return</p>
          <input type="date" id="return" value="2025-09-06" class="px-2 py-1  rounded">
        </div>
      </div>

      <!-- Passengers -->
      <div class="border-2 p-2 flex flex-col justify-between">
        <p class="text-sm">Passengers</p>
        <select class="px-2 py-1">
          <option>1 adult, Economy</option>
        </select>
      </div>

      <!-- Search -->
      <button class="px-10 bg-green-950 hover:bg-green-900 font-semibold text-white rounded flex items-center justify-center text-[16px]">
        Edit
      </button>

    </div>
  </div>

    <div class="flex flex-row gap-3">
        <!-- left  -->
        <div class="flex-1 bg-white max-w-[267px] h-[2248px]">
           
        </div>  

        <!-- right  -->
        <div class="flex flex-col flex-1 space-y-3">
            <div class="flex-1  max-h-[107px] bg-emerald-950 rounded-xl">
               
            </div>

            <div class="flex items-center space-x-[0.5px] w-full ">
  
                <!-- Left arrow -->
                <button class="p-3 border rounded hover:bg-gray-100 bg-white h-full">
                    <span class="text-blue-600 text-[20px] font-bold">&lt;</span>
                </button>

                <!-- Scrollable container -->
                <div class="flex overflow-x-auto no-scrollbar space-x-[0.5px]">
                    
                    <!-- Active card -->
                    <div class="flex flex-col items-center justify-center w-40 h-24 border rounded bg-blue-500 text-white">
                    <p class="font-semibold">Sep 3 - Sep 6</p>
                    <p class="text-sm">PHP 9,000</p>
                    </div>

                    <!-- Other cards -->
                    <div class="flex flex-col items-center justify-center w-40 h-24 border rounded hover:bg-gray-50 cursor-pointer bg-white">
                    <p class="font-semibold">Sep 4 - Sep 7</p>
                    <p class="text-sm">VIEW</p>
                    </div>

                    <div class="flex flex-col items-center justify-center w-40 h-24 border rounded hover:bg-gray-50 cursor-pointer bg-white">
                    <p class="font-semibold">Sep 5 - Sep 8</p>
                    <p class="text-sm">VIEW</p>
                    </div>

                    <div class="flex flex-col items-center justify-center w-40 h-24 border rounded hover:bg-gray-50 cursor-pointer bg-white">
                    <p class="font-semibold">Sep 6 - Sep 9</p>
                    <p class="text-sm">VIEW</p>
                    </div>

                    <div class="flex flex-col items-center justify-center w-40 h-24 border rounded hover:bg-gray-50 cursor-pointer bg-white">
                    <p class="font-semibold">Sep 7 - Sep 10</p>
                    <p class="text-sm">VIEW</p>
                    </div>

                    <div class="flex flex-col items-center justify-center w-40 h-24 border rounded hover:bg-gray-50 cursor-pointer bg-white">
                    <p class="font-semibold">Sep 8 - Sep 11</p>
                    <p class="text-sm">VIEW</p>
                    </div>

                </div>

                <!-- Right arrow -->
                <button class="p-3 border rounded hover:bg-gray-100 bg-white h-full">
                    <span class="text-blue-600 text-[20px] font-bold">&gt;</span>
                </button>

            </div>
            
            <div class="h-auto bg-white flex-1 px-10 py-[30px] gap-8 ">
                <p class="text-sm text-xs font-semibold">Select your departing flight </p>
                <div class="flex text-2xl">
                    <h1 class="font-bold">
                        {% if origin_airport %}
                            {{ origin_airport.name }}-{{ origin_airport.code }}
                        {% else %}
                            From
                        {% endif %}
                    </h1>
                    <p>===</p>
                    <h1 class="font-bold">
                        {% if destination_airport %}
                            {{ destination_airport.name }}-{{ destination_airport.code }}
                        {% else %}
                            To
                        {% endif %}
                    </h1>
                </div>


                <div class="flex justify-between mt-5 ">
                    <div class="flex gap-3 text-white">
                        <p class="text-black text-sm">Filter by:</p>
                        <div class="flex gap-3 ">
                            <button class="bg-green-950 h-[35px] w-[167px] text-sm">Time of Flight</button>
                            <button class="bg-green-950 h-[35px] w-[167px] text-sm">Stops</button>
                            <button class="bg-green-950 h-[35px] w-[167px] text-sm">Price</button>
                        </div> 
                    </div>
                    <div class="flex gap-2">
                        <p>sort by:</p>
                        <button class="bg-green-950 h-[35px] w-[167px] text-white">Lowest Price</button>
                    </div>
                    
                </div>

                <div class="flex flex-col leading-none mt-5 gap-[3px]">
                {% for schedule in schedules %}
                    <div class="border2 flex justify-between border-2 h-[137px] items-center px-10">
                        
                        <!-- Route -->
                        <div class="flex text-xl">
                            <h1 class="font-bold">{{ schedule.flight.route.origin_airport.code }}</h1>
                            <p class="text-lg">==</p>
                            <h1 class="font-bold">{{ schedule.flight.route.destination_airport.code }}</h1>
                        </div>

                        <!-- Flight Info -->
                        <div>
                            <p>Flight Number: <strong>{{ schedule.flight.flight_number }}</strong></p>
                            <p>Operated by: <strong>{{ schedule.flight.airline.name }}</strong></p>
                            <p class="text-xs">Depart: {{ schedule.departure_time|date:"M d, Y H:i" }}</p>
                            <p class="text-xs">Arrive: {{ schedule.arrival_time|date:"M d, Y H:i" }}</p>
                        </div>

                        <!-- Price (example: base price * economy multiplier) -->
                        <div>
                            <p class="text-xs">All-in Fare/Guest</p>
                            <strong class="font-semibold">
                                PHP {{ schedule.price|floatformat:2 }} <!-- replace with real price logic -->
                            </strong>
                        </div>

                        <!-- Action -->
                        <div>
                            <form method="POST" action="{% url 'select_schedule' %}">
                                {% csrf_token %}
                                <input type="hidden" name="schedule_id" value="{{ schedule.id }}">
                                <button  type="submit" class="bg-green-950 w-[113px] text-white py-2">Select</button>
                            </form>

                        </div>
                    </div>
                {% empty %}
                    <p>No flights found.</p>
                {% endfor %}
            </div>

        </div>

            <div class="border-2 border-gray-500"></div>

       
    </div>

  </div>
{% endblock %}