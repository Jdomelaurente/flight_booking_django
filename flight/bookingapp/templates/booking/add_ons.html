{% extends 'ui_test/base.html' %}
{% load static %}

{% block title %}Add-ons{% endblock %}

{% block content %}

<!-- step by step process -->
<div class="bg-[#FFC83D] w-full h-[160px] mx-auto flex flex-col">
    <!-- arrow  -->
    <div class="flex justify-between items-center flex-1 mx-20">
        <div class="rounded-full p-1 border border-[#093704]">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="bg-[#093704] p-1 rounded-full"
                fill="white" viewBox="0 0 24 24">
                <path d="m17.54,3.64l-2.9,2.9-9.88-1.16c-.15-.02-.3.03-.41.14l-.59.59c-.24.24-.17.66.14.8l7.01,3.36-3.25,3.25-3.27-.65c-.16-.03-.33.02-.45.14l-.7.7c-.25.25-.17.67.16.81l4.27,1.83,1.83,4.27c.14.33.56.41.81.16l.7-.7c.12-.12.17-.29.14-.45l-.65-3.27,3.31-3.31,3.31,7.06c.15.31.56.39.81.14l.66-.66c.11-.11.16-.26.14-.41l-1.16-9.88,2.75-2.75c.7-.7.88-1.84.29-2.65-.74-1.03-2.19-1.12-3.05-.26Z"></path>
            </svg>
        </div>

        <div class="flex-1 h-1 border-t-4 border-dashed border-[#093704] mx-4"></div>

        <div class="rounded-full p-1 border border-[#093704]">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="bg-[#093704] p-1 rounded-full"
                fill="white" viewBox="0 0 24 24">
                <path d="m19,2H5c-.55,0-1,.45-1,1v4h-2v2h2v2h-2v2h2v2h-2v2h2v4c0,.55.45,1,1,1h14c1.1,0,2-.9,2-2V4c0-1.1-.9-2-2-2Zm-6.5,5c1.43,0,2.5,1.07,2.5,2.5s-1.07,2.5-2.5,2.5-2.5-1.07-2.5-2.5,1.07-2.5,2.5-2.5Zm4.5,10h-9v-1c0-1.66,1.34-3,3-3h3c1.66,0,3,1.34,3,3v1Z"></path>
            </svg>
        </div>

        <div class="flex-1 h-1 border-t-4 border-dashed border-[#093704] mx-4"></div>

        <div class="rounded-full p-1 border border-[#093704] bg-[#093704]">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="bg-[#FFC83D] p-1 rounded-full"
                fill="#093704" viewBox="0 0 24 24">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"></path>
            </svg>
        </div>

        <div class="flex-1 h-1 border-t-4 border-dashed border-[#093704] mx-4"></div>

        <div class="rounded-full p-1 border border-[#093704]">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="bg-[#093704] p-1 rounded-full"
                fill="white" viewBox="0 0 24 24">
                <path d="m4,5v4h2v-4h4v-2h-4c-1.1,0-2,.9-2,2Z"></path><path d="m6,15h-2v4c0,1.1.9,2,2,2h4v-2h-4v-4Z"></path><path d="m20,19h-4v2h4c1.1,0,2-.9,2-2v-4h-2v4Z"></path><path d="m16,3v2h4v4h2v-4c0-1.1-.9-2-2-2h-4Z"></path><path d="M8 15H18V17H8z"></path><path d="M18 7 8 7 8 11 3 11 3 13 8 13 18 13 23 13 23 11 18 11 18 7z"></path>
            </svg>
        </div>

        <div class="flex-1 h-1 border-t-4 border-dashed border-[#093704] mx-4"></div>

        <div class="rounded-full p-1 border border-[#093704]">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="bg-[#093704] p-1 rounded-full"
                fill="white" viewBox="0 0 24 24">
                <path d="m21,7h-1v-3c0-.55-.45-1-1-1H5c-1.65,0-3,1.35-3,3v12c0,2.2,1.79,3,3,3h16c.55,0,1-.45,1-1v-12c0-.55-.45-1-1-1Zm-3,9h-2v-4h2v4ZM5,5h13v2H5c-.55,0-1-.45-1-1s.45-1,1-1Z"></path>
            </svg>
        </div>

        <div class="flex-1 h-1 border-t-4 border-dashed border-[#093704] mx-4"></div>

        <div class="rounded-full p-1 border border-[#093704]">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="bg-[#093704] p-1 rounded-full"
                fill="white" viewBox="0 0 24 24">
                <path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m-1.29 13.71c-.2.2-.45.29-.71.29s-.51-.1-.71-.29l-3-3L7.7 11.3l2.29 2.29 5.29-5.29 1.41 1.41-6 6Z"></path>
            </svg>
        </div>
    </div>

    <!-- labels -->
    <div class="flex justify-between items-center px-15 pb-4 text-xs">
        <span class="font-medium">Flight Selection</span>
        <span class="font-medium">Passenger Info</span>
        <span class="font-medium text-[#093704]">Add-ons</span>
        <span class="font-medium">Seat Selection</span>
        <span class="font-medium">Payment</span>
        <span class="font-medium">Confirmation</span>
    </div>
</div>

<!-- add ons -->
<div class="mt-5 w-full px-15 py-5 flex flex-col">
    <div class="w-full flex justify-between gap-5">
        <!-- left -->
        <div class="flex-1 border px-8 py-5 bg-[#FFFCF5] border-gray-400 space-y-2">
            <div class="flex flex-col mb-6">
                <h1 class="text-2xl font-semibold">Add-ons</h1>
                <p class="text-xs text-gray-400">Customize your add-ons for better travel experience</p>
            </div>

            <div class="grid grid-cols-2 gap-5">
                <!-- Extra Baggage -->
                <div class="border p-4 rounded-sm bg-white border-gray-400 hover:border-[#093704] transition-colors">
                    <!-- image -->
                    <div class="min-h-[200px] rounded-xs bg-gray-300 flex items-center justify-center">
                        <svg class="w-12 h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                        </svg>
                    </div>
                    <div class="flex flex-col mt-3">
                        <h1 class="font-medium leading-none text-lg">Extra Baggage</h1>
                        <p class="text-xs text-gray-400 mt-1">More baggage allowance for your luggage</p>
                        <div class="flex justify-between items-center mt-4">
                            <h1 class="font-semibold text-lg">₱ 650.00</h1>
                            <a href="{% url 'bookingapp:baggage_addon' %}?airline_id={{ depart_schedule.flight.airline.id }}&schedule_id={{ depart_schedule.id }}&return_schedule_id={{ return_schedule.id|default:'' }}"
                               class="bg-[#093704] hover:bg-[#093704]/80 cursor-pointer py-2 px-6 text-sm rounded-full text-[#FFC83D] transition-colors">
                                Select
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Seat Selection -->
                <div class="border p-4 rounded-sm bg-white border-gray-400 hover:border-[#093704] transition-colors">
                    <!-- image -->
                    <div class="min-h-[200px] rounded-xs bg-gray-300 flex items-center justify-center">
                        <svg class="w-12 h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                        </svg>
                    </div>
                    <div class="flex flex-col mt-3">
                        <h1 class="font-medium leading-none text-lg">Seat Selection</h1>
                        <p class="text-xs text-gray-400 mt-1">Choose your preferred seat location</p>
                        <div class="flex justify-between items-center mt-4">
                            <h1 class="font-semibold text-lg">₱ 500.00</h1>
                            <a href="{% url 'bookingapp:select_seat' %}?from_addons=true"
                            class="bg-[#093704] hover:bg-[#093704]/80 cursor-pointer py-2 px-6 text-sm rounded-full text-[#FFC83D] transition-colors">
                                Select Seats
                            </a>
                        </div>
                    </div>
                </div>

                <!-- In-flight Meals -->
                <div class="border p-4 rounded-sm bg-white border-gray-400 hover:border-[#093704] transition-colors">
                    <!-- image -->
                    <div class="min-h-[200px] rounded-xs bg-gray-300 flex items-center justify-center">
                        <svg class="w-12 h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div class="flex flex-col mt-3">
                        <h1 class="font-medium leading-none text-lg">In-flight Meals</h1>
                        <p class="text-xs text-gray-400 mt-1">Pre-order delicious meals for your flight</p>
                        <div class="flex justify-between items-center mt-4">
                            <h1 class="font-semibold text-lg">₱ 350.00</h1>
                            <a href="{% url 'bookingapp:meals_addon' %}?airline_id={{ depart_schedule.flight.airline.id }}&schedule_id={{ depart_schedule.id }}&return_schedule_id={{ return_schedule.id|default:'' }}"
                               class="bg-[#093704] hover:bg-[#093704]/80 cursor-pointer py-2 px-6 text-sm rounded-full text-[#FFC83D] transition-colors">
                                Select
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Wheelchair Service -->
                <div class="border p-4 rounded-sm bg-white border-gray-400 hover:border-[#093704] transition-colors">
                    <!-- image -->
                    <div class="min-h-[200px] rounded-xs bg-gray-300 flex items-center justify-center">
                        <svg class="w-12 h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                        </svg>
                    </div>
                    <div class="flex flex-col mt-3">
                        <h1 class="font-medium leading-none text-lg">Wheelchair Service</h1>
                        <p class="text-xs text-gray-400 mt-1">Assistance for passengers with mobility needs</p>
                        <div class="flex justify-between items-center mt-4">
                            <h1 class="font-semibold text-lg">₱ 300.00</h1>
                            <a href="{% url 'bookingapp:wheelchair_addon' %}?airline_id={{ depart_schedule.flight.airline.id }}&schedule_id={{ depart_schedule.id }}&return_schedule_id={{ return_schedule.id|default:'' }}"
                               class="bg-[#093704] hover:bg-[#093704]/80 cursor-pointer py-2 px-6 text-sm rounded-full text-[#FFC83D] transition-colors">
                                Select
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Selection Option -->
            <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-sm">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold text-blue-800">Quick Selection</h3>
                        <p class="text-xs text-blue-600">Select all add-ons on one page</p>
                    </div>
                    <a href="{% url 'bookingapp:quick_addons' %}?airline_id={{ depart_schedule.flight.airline.id }}&schedule_id={{ depart_schedule.id }}&return_schedule_id={{ return_schedule.id|default:'' }}"
                       class="bg-blue-600 hover:bg-blue-700 cursor-pointer py-2 px-6 text-sm rounded-full text-white transition-colors">
                        Quick Select
                    </a>
                </div>
            </div>
        </div>

        <!-- right -->
        <div class="flex-1 max-w-[500px] space-y-4">
            <!-- Travel Insurance Card -->
            <div class="flex-1 flex-col px-5 py-4 bg-white space-y-3 border-gray-300 rounded-sm flex border">
                <div class="flex justify-between items-end">
                    <h1 class="text-xl font-semibold">Travel Insurance</h1>
                    <p class="text-xs text-red-500">Your trip is not protected</p>
                </div>
                <!-- details -->
                <div class="border w-full bg-[#FFFCF5] flex justify-between px-6 py-4 text-xs gap-8">
                    <ul class="list-disc space-y-3 ml-4">
                        <li class="font-medium">Medical expenses</li>
                        <li class="font-medium">Cancellation expenses</li>
                        <li class="font-medium">Loss/Damage of Luggage</li>
                        <li class="font-medium">24/7 Emergency Help</li>
                        <li class="font-medium">Flight & baggage Delay</li>
                        <li class="font-medium">Personal Accident</li>
                    </ul>
                </div>

                <div class="w-full flex justify-between items-center my-2">
                    <h1 class="text-2xl font-semibold">₱ 922.00</h1>
                    <a href="{% url 'bookingapp:insurance_addon' %}?airline_id={{ depart_schedule.flight.airline.id }}&schedule_id={{ depart_schedule.id }}&return_schedule_id={{ return_schedule.id|default:'' }}"
                       class="py-2 text-sm px-6 bg-[#FFC83D] hover:bg-[#FFC83D]/80 cursor-pointer font-medium text-[#093704] rounded-full transition-colors">
                        Protect My Trip
                    </a>
                </div>
                
                <div class="border-t border-gray-400 pt-2">
                    <p class="text-gray-400 text-xs text-center">Travel Insurance is underwritten by Alliedbankers Insurance Company</p>
                </div>
            </div>

            <!-- Selected Add-ons Summary -->
            {% if selected_addons %}
            <div class="bg-green-50 border border-green-200 rounded-sm p-4">
                <h3 class="font-semibold text-green-800 mb-2">Selected Add-ons</h3>
                <div class="text-sm text-green-700 space-y-1">
                    {% for passenger_id, addon_list in selected_addons.items %}
                    {% if addon_list %}
                    <div class="flex justify-between">
                        <span>Passenger {{ forloop.counter }}:</span>
                        <span>{{ addon_list|length }} add-on(s)</span>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Flight Information -->
            <div class="bg-gray-50 border border-gray-200 rounded-sm p-4">
                <h3 class="font-semibold text-gray-800 mb-2">Flight Details</h3>
                <div class="text-sm text-gray-600 space-y-1">
                    <div class="flex justify-between">
                        <span>Departure:</span>
                        <span class="font-medium">{{ depart_schedule.flight.route.origin_airport.code }} → {{ depart_schedule.flight.route.destination_airport.code }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Date:</span>
                        <span>{{ depart_schedule.departure_time|date:"M d, Y" }}</span>
                    </div>
                    {% if return_schedule %}
                    <div class="flex justify-between">
                        <span>Return:</span>
                        <span class="font-medium">{{ return_schedule.flight.route.origin_airport.code }} → {{ return_schedule.flight.route.destination_airport.code }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Date:</span>
                        <span>{{ return_schedule.departure_time|date:"M d, Y" }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="w-full flex gap-3 mt-4">
                <a href="{% url 'bookingapp:passenger_information' %}"
                class="flex-1 py-3 bg-white hover:bg-gray-100 cursor-pointer rounded-sm border border-gray-500 text-center font-medium transition-colors">
                    Back
                </a>
                <a href="{% url 'bookingapp:select_seat' %}?skip_addons=true"
                class="flex-1 py-3 bg-gray-500 hover:bg-gray-600 cursor-pointer rounded-sm text-white text-center font-medium transition-colors">
                    Skip Add-ons
                </a>
                <button type="submit"
                        class="flex-1 py-3 rounded-sm bg-[#093704] hover:bg-[#093704]/80 cursor-pointer text-[#FFC83D] text-center font-medium transition-colors">
                    Save Add-ons & Continue
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}